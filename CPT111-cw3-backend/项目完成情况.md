# 项目完成情况总结（最新）

## ✅ 核心功能（全部就绪）

### 未登录菜单
- **Login**：校验用户名 + 自定义哈希密码。
- **Register**：提供角色选择（Basic / Premium），并实时写回 CSV。
- **Exit**：安全退出。

### 登录后菜单
- **Browse movies**：遍历全部电影并逐条输出（不再排序，保持最基础实现）。
- **Add / Remove / View watchlist**：支持去重、上限控制（Basic=10，Premium=无限）及信息展示。
- **Mark as watched / View history**：记录日期（`SimpleDateFormat`），自动移出 watchlist。
- **Get recommendations**：按最简单策略（顺序扫描、过滤看过/待看、数量不足时 fallback）返回 N 条。
- **Change password / Create new account / Logout**：完成用户管理闭环，并确保每次修改后立即持久化。

CLI 与 GUI 两种入口功能完全一致，二者都能独立启动。

## ✅ 已实现的扩展特性
1. **注册 + 角色管理**：Basic 与 Premium 角色用常量区分，影响推荐数量与 watchlist 上限。
2. **密码修改与自定义哈希**：`PasswordUtil` 采用课程允许的基础循环+字符串拼接方式生成十六进制摘要。
3. **JavaFX 图形界面**：`MovieAppGUI` 提供登录、注册、列表、历史、推荐、密码修改等完整操作，并新增 `main` 方法实现独立运行。
4. **数据持久化**：所有用户操作即时写回 `users.csv`，程序重启后可恢复状态。

## ✅ 技术与合规要求

- **OOP 结构**：`Movie`（含 `FeatureFilm` / `ShortFilm`）、`User`、`Watchlist`、`History`、`FileManager`、`MovieAppGUI`、`RecommendationEngine` 等类职责清晰；无自定义接口/抽象类/枚举，完全符合补充问答。
- **数据结构**：使用 `HashMap<String, Movie>`、`HashMap<String, User>` 与 `ArrayList<String>`，未引入禁止的 `Iterator`、`LinkedHashMap` 等。
- **文件 I/O**：仅依赖 Week10 学过的 `BufferedReader/Writer`、`FileReader/Writer`、`Scanner` 等。
- **异常处理**：所有文件、输入操作都有 try-catch；CLI/GUI 都提供用户友好提示。
- **库限制**：未使用 `MessageDigest`、Stream、lambda、Optional、枚举等高级语法；GUI 仅用 JavaFX 官方组件。

## 📊 推荐逻辑（当前实现）
1. 读取用户要求的推荐数量，先套用角色上限。
2. 顺序遍历 `movies`，跳过已观看和 watchlist 中的影片。
3. 若不足，放宽到只排除历史记录；再不足则直接补齐剩余电影。
4. 输出顺序与 CSV 数据一致，保证“基础语法可解释”。

## 📁 文件结构（精简版）
```
src/
 ├── Main.java / MovieAppGUI.java
 ├── Movie.java / FeatureFilm.java / ShortFilm.java / MovieCategory.java / MovieFactory.java
 ├── User.java / UserRole.java / UserFactory.java
 ├── Watchlist.java / History.java / PasswordUtil.java
 ├── RecommendationEngine.java
 └── FileManager.java
```

## 📝 总结
- 项目所有必做功能均可在 CLI 与 GUI 中运行。
- 代码严格遵守《项目合规性问答》：只用课堂讲解过的基础语法、I/O 与库；无 lambda / Stream / enum / MessageDigest 等禁用特性。
- 仍保留良好的数据持久化、错误处理与用户交互体验，可直接提交用于验收。***
